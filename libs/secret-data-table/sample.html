<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="stylesheet" href="http://netdna.bootstrapcdn.com/bootstrap/3.1.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="http://netdna.bootstrapcdn.com/bootstrap/3.1.0/css/bootstrap-theme.min.css">
    <link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.css" />
    <link rel="stylesheet" href="http://weblibraries.s3.amazonaws.com/jquery.pnotify.default.css">
    <link rel="stylesheet" href="http://weblibraries.s3.amazonaws.com/jquery.pnotify.default.icons.css">
    <style type="text/css">
      body {
        padding-top: 60px;
        padding-bottom: 40px;
      }
    </style>

    <link href="http://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
  </head>

  <body>
    <div class="container">
      <div class="row">
        <div class="col-xs-12 col-md-12 col-lg-12">
            <form id="form-create" role="form" class="form form-horizontal" style="display:none;">
                <div class="form-group">
                    <label for="description">Description</label>
                    <input id="description" name="description" type="text" placeholder="description" class="input-lg form-control" required=""/>
                </div>
                <div class="form-group">
                    <label for="tags">Tags</label>
                    <input id="tags" name="tags" type="text" placeholder="tag1,tag2,tag3" class="input-lg form-control"/>
                </div>
                <button type="submit" class="btn btn-primary">Save</button>
            </form>

            <table id="table-list" class="table table-striped table-hover table-condensed table-responsive tablesorter">
                <thead>
                    <tr>
                        <th class="col-lg-4">Description</th>
                        <th class="col-lg-4">Tags</th>
                        <th class="col-lg-2">Button</th>
                        <th class="col-lg-1">Update</th>
                        <th class="col-lg-1">Delete</th>
                    </tr>
                </thead>
                <tbody>
                </tbody>
            </table>
        </div>
      </div>

      <hr/>
    </div>

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/jquery-ui.min.js"></script>
    <script src="http://netdna.bootstrapcdn.com/bootstrap/3.1.0/js/bootstrap.min.js"></script>
    <script src="http://weblibraries.s3.amazonaws.com/jquery.pnotify.min.js"></script>
    <script src="http://weblibraries.s3.amazonaws.com/jquery.tablesorter.min.js"></script>
    <script src="http://weblibraries.s3.amazonaws.com/hmac-sha256.min.js"></script>
    <script src="http://weblibraries.s3.amazonaws.com/enc-base64.min.js"></script>
    <!-- PRODUCTION -->
    <script src="http://weblibraries.s3.amazonaws.com/secret-rest-client.min.js"></script>
    <script src="http://weblibraries.s3.amazonaws.com/secret-data-table.min.js"></script>
    <!-- DEV -->
    <script src="secret-data-table.js"></script>

    <script language="JavaScript">
        $(document).ready(function() {
            var secretTable = new SecretDataTable({
                table: $("#table-list"),
                columns: [
                    function(data, id) { return data.description },
                    function(data, id) { return data.tags },
                    function(data, id) {
                        var button = $("<button/>");
                        button.click(function() {
                            // custom action
                        });
                        return button;
                    },
                ],
                formCreate: $("#form-create"),
                formUpdate: $("#form-create"),
                create: true,
                update: true,
                del: true,
                onTableLoad: function(table){},
                onCreate: function(table, data){ table.createLine(new Date().getTime(), data); },
                onUpdate: function(table, id, data){ table.updateLine(id, data); },
                onCreateOrUpdate: function(table, id, data){ table.createOrUpdateLine(data._id || id, data); },
                onDelete: function(table, id, data){ table.deleteLine(id, data); },
                onTableChange: function(table){
                    console.log(table.getLines().length + " LINES");
                    console.log(table.getLines());
                    console.log("COLUMN 0 (" + table.getColumn(0).length + ")");
                    console.log(table.getColumn(0));
                    console.log("COLUMN 50 (" + table.getColumn(0).length + ")");
                    console.log(table.getColumn(50));
                },
                onModalReady: function(modal){}
            });
            secretTable.createLine("123", {description:"test", tags:"abc"})
            secretTable.createOrUpdateLine("123", {description:"test2", tags:"abc2"})
            secretTable.createOrUpdateLine("1234", {description:"test3", tags:"abc3"})
        });
    </script>


  </body>
</html>
